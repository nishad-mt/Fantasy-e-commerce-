{% extends 'index.html' %}
{% load static %}
{% block content %}

<style>
  body {
    background: #fffdf8;
    font-family: 'Poppins', sans-serif;
  }

  .card-custom {
    border: 1px solid #d1b89c;
    border-radius: 14px;
    transition: 0.3s;
    background: white;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    height: 100%;
  }

  .card-custom:hover {
    box-shadow: 0 6px 15px rgba(0, 0, 0, .1);
    transform: translateY(-4px);
  }

  .product-img {
    height: 200px;
    object-fit: cover;
    width: 100%;
    border-radius: 12px;
  }

  .remove-btn:hover {
    background: #be2b2b !important;
    color: white !important;
  }
</style>

<!-- PAGE WRAPPER (fix navbar overlap) -->
<div class="pt-32">

  <!-- PAGE TITLE -->
  <div class="text-center mb-10">
    <h2 class="text-3xl font-bold text-[#5a3e2b]">Your Wishlist</h2>
    <p class="text-gray-600 mt-2">
      Save items to review or buy later.
    </p>
  </div>

  <!-- WISHLIST GRID -->
  <div class="max-w-7xl mx-auto px-6 pb-16">
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">

{% for item in items %}
  <div class="bg-white rounded-2xl shadow-sm hover:shadow-md transition border border-gray-100 flex flex-col">

    <!-- Clickable Product Area -->
    <a href="{% url 'user_product' item.product.slug %}" class="flex flex-col">

        <!-- Image -->
        <div class="h-48 bg-gray-50 flex items-center justify-center rounded-t-2xl overflow-hidden">
            <img
                src="{{ item.product.main_image.url }}"
                alt="{{ item.product.name }}"
                class="h-full w-full object-cover"
            >
        </div>

        <!-- Content -->
        <div class="p-4 flex flex-col flex-1">
            <h4 class="font-semibold text-[#5a3e2b] text-lg leading-tight">
                {{ item.product.name }}
            </h4>

            <p class="text-md mt-2 text-gray-600 line-clamp-2">
                {{ item.product.description }}
            </p>

            <p class="text-xs text-gray-400 mt-1">
                Best before: {{ item.product.best_before }}
            </p>
        </div>

    </a>

    <!-- Actions (NOT clickable link) -->
    <div class="p-4 pt-0 flex gap-3">

        <a href="{% url 'user_product' item.product.slug %}"
           class="flex-1 bg-fantasy-brown text-white py-2 rounded-lg text-sm font-medium
                  hover:bg-opacity-90 transition flex items-center justify-center gap-2">
            <i class="fa-solid fa-basket-shopping"></i>
            Select Size
        </a>

        <form method="post"
              action="{% url 'wishlist:toggle_wishlist' item.product.pk %}"
              class="flex-1">
            {% csrf_token %}
            <button
                class="w-full border border-red-500 text-red-500 py-2 rounded-lg
                       text-sm font-medium hover:bg-red-50 transition">
                Remove
            </button>
        </form>

    </div>
</div>


 {% empty %}
  <div class="col-span-full flex flex-col items-center justify-center py-16 text-center">
  <!-- Background Image -->
  <img
      src="{% static 'images/cooking.jpg' %}"
      alt="Empty Wishlist"
      class="w-60 opacity-20"
  />
      <h3 class="text-2xl font-bold text-gray-800 mb-2">
          Oops! Your Wishlist is Empty
      </h3>
      <p class="text-base text-gray-600">
          Browse our <a href="{% url 'products' %}"
           class="text-blue-600 hover:text-blue-800 transition-colors duration-300 font-semibold">
            products </a>and add your favorites to make your wishlist magical ✨
      </p>
</div>

{% endfor %}

</div>

  </div>

  <!-- FOOTER -->
  <footer class="py-6 text-center text-gray-600 text-sm">
    © 2025 Fantasy Foods — Crafted with love & magic ✨
  </footer>

</div>

{% endblock %}
